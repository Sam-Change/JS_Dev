<!-- jsTestIndex -->
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>jsTestIndex</title>
</head>

<body>
  <!--畫面組成-->
  <!--span id(document.getElementById)為web端儲存資料欄位名稱，會一直撈此欄位資料當欄位值改變就會更新?-->
  <p>SoftMobile TestWebView</p>
  <button class="button_style button_y10" onclick="goHome()">返回首頁goHome()</button>
  <button class="button_style button_y20" onclick="onOCR()">OCR辨識onOCR</button>
  
  <script>
    var ideviceCheck = isiOSDevice()
    function isiOSDevice() {
      const mobileDevice = ['iPhone', 'iPad', 'iPod']
      let isMobileDevice = mobileDevice.some(e => navigator.userAgent.match(e))
      return isMobileDevice
    }
    
    function packet_onLoadingData(str) {
      let data = {"open": str}
      return data
    }

    let packet_onLoadingY = {
      "name": "onLoading",
      "data": JSON.stringify(packet_onLoadingData("Y"))
    }
    
    let packet_onLoadingN = {
      "name": "onLoading", 
      "data": JSON.stringify(packet_onLoadingData("N"))
    }
    
    function onLoadingY() {
      if (ideviceCheck) {
        var action = JSON.stringify(packet_onLoadingY);
        window.webkit.messageHandlers.jstoapp.postMessage(action);
      }
      else {
        if (jstoapp) {
          var action = JSON.stringify(packet_onLoadingData("Y"));
          jstoapp.onLoadingY(action);
        }
      }
    }

    function onLoadingN() {
      if (ideviceCheck) {
        var action = JSON.stringify(packet_onLoadingN);
        window.webkit.messageHandlers.jstoapp.postMessage(action);
      }
      else {
        if (jstoapp) {
          var action = JSON.stringify(packet_onLoadingData("N"));
          jstoapp.onLoadingN(action);
        }
      }
    }

    let packet_goHome = {
      "name": "goHome",
    }

    function goHome() {
      if (ideviceCheck) {
        var action = JSON.stringify(packet_goHome);
        window.webkit.messageHandlers.jstoapp.postMessage(action);
      }
      else {
        if (jstoapp) {
          jstoapp.goHome();
        }
      }
    }

    let packet_onOCRData = {
      "ocrType": 1,
    }

    let packet_onOCR = {
      "name": "onOCR",
      "data": JSON.stringify(packet_onOCRData),
    }

    function onOCR() {
      if (ideviceCheck) {
        var action = JSON.stringify(packet_onOCR);
        window.webkit.messageHandlers.jstoapp.postMessage(action);
      }
      else {
        if (jstoapp) {
          var action = JSON.stringify(packet_onOCRData);
          jstoapp.onOCR(action);
        }
      }
    }
  </script>
</body>
  
<style>
  .button_style {
    position: absolute;
    width: 100%;
    left: 0%;
    top: 0%;
    height: 10%;
  }
  .button_y10 {
    top: 10%;
  }
  .button_y20 {
    top: 20%;
  }
  .button_y30 {
    top: 30%;
  }
  .button_y40 {
    top: 40%;
  }
  .button_y50 {
    top: 50%;
  }
  .button_y60 {
    top: 60%;
  }
  .button_y70 {
    top: 70%;
  }
  .button_y80 {
    top: 80%;
  }
  .button_y90 {
    top: 90%;
  }
</style>
  
</html>
